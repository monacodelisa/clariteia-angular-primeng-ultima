<div class="card">
  <div class="controls flex flex-wrap gap-2 align-items-center justify-content-between">
    <p>Projects</p>
    <div class="actions">
      <div class="buttons">
        <p-button [link]="true"><i class="pi pi-search"></i></p-button>
        <p-button [link]="true"><i class="pi pi-filter"></i></p-button>
        <p-button [link]="true"><i class="pi pi-pencil"></i></p-button>
        <!-- <input pInputText type="text" (input)="onGlobalFilter(dt, $event)" placeholder="Global Search" class="w-full" /> -->
      </div>
      <button (click)="navigateToCreateProject()" pButton class="p-button w-full sm:w-auto flex-order-0 sm:flex-order-1"
        icon="pi pi-plus" iconPos="right" label="New project"></button>
    </div>
  </div>

  <p-table [value]="projects" rowGroupMode="subheader" groupRowsBy="stage.name" sortField="stage.name" sortMode="single"
  [paginator]="true" [rows]="10" [showCurrentPageReport]="true"
    responsiveLayout="scroll" currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
    [rowsPerPageOptions]="[10,25,50]">
  <ng-template pTemplate="header">
    <tr>
      <th style="width:30%">Name<i class="pi pi-angle-down" field="name"></i></th>
      <th style="width:15%">Next due date<i class="pi pi-angle-down" field="dueDate"></i></th>
      <th style="width:15%">Last modified<i class="pi pi-angle-down" field="lastModified"></i></th>
      <th style="width:15%">Client<i class="pi pi-angle-down" field="client"></i></th>
      <th style="width:15%">My role<i class="pi pi-angle-down" field="role"></i></th>
      <th pSortableColumn="status" style="width:10%">Status<i class="pi pi-angle-down" field="status"></i></th>
    </tr>
  </ng-template>
  <ng-template pTemplate="groupheader" let-project>
    <tr pRowGroupHeader>
      <td colspan="6">
        <span>{{project.stage.name}}</span>
      </td>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-project let-rowIndex="rowIndex">
    <tr>
      <td>
        {{project.name}}
      </td>
      <td>
        {{project.dueDate}}
      </td>
      <td>
        {{project.lastModified}}
      </td>
      <td>
        {{project.client.name}}
      </td>
      <td>
        <span>{{project.role}}</span>
      </td>
      <td>
        <p-dropdown [options]="stage" optionLabel="name" [showClear]="true" placeholder="{{project.status}}" [style]="{'width': '10rem'}"></p-dropdown>
      </td>
    </tr>
  </ng-template>
</p-table>
</div>
